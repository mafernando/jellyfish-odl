module JellyfishOdl
  module Provider
    class Odl < ::Provider
      def network_topology
        # auth = { username: settings[:username], password: settings[:password] }
        # base_url = "http://#{settings[:ip_address]}:#{settings[:port]}"
        # headers = { 'Content-Type' => 'application/json', 'Accept' => 'application/json' }
        # odl_module = 'restconf/operational/opendaylight-inventory:nodes/'
        # composite_url = "#{base_url}/#{odl_module}"
        # response = client.get(composite_url, basic_auth: auth, headers: headers)
        # nodes = []
        # begin
        #   response['nodes']['node'].reverse_each do |x|
        #     id = x['id']
        #     # next unless /openflow:\d+/ =~ id
        #     nodes << x
        #   end
        # rescue
        #   # TODO: HANDLE UNRULY RESPONSES
        #   throw Exception
        # end
        # nodes

        # z =

        # SAMPLE ODL INVENTORY
        '[{"id":"vRouter5600","netconf-node-inventory:initial-capability":["(urn:vyatta.com:mgmt:vyatta-op?revision=2014-12-16)vyatta-op","(urn:vyatta.com:mgmt:vyatta-service-nat?revision=2014-10-28)vyatta-service-nat","(urn:vyatta.com:mgmt:vyatta-protocols-ospf?revision=2015-06-11)vyatta-protocols-ospf","(urn:vyatta.com:mgmt:vyatta-service-snmp?revision=2015-02-11)vyatta-service-snmp","(urn:vyatta.com:mgmt:vyatta-nhrp?revision=2015-05-11)vyatta-nhrp","(urn:vyatta.com:mgmt:vyatta-protocols-rib?revision=2015-05-26)vyatta-protocols-rib","(urn:vyatta.com:mgmt:vyatta-interfaces-bonding?revision=2015-06-08)vyatta-interfaces-bonding","(urn:vyatta.com:mgmt:vyatta-dscp?revision=2015-03-02)vyatta-dscp","(urn:vyatta.com:mgmt:vyatta-security-vpn-ipsec?revision=2015-04-10)vyatta-security-vpn-ipsec","(urn:vyatta.com:mgmt:vyatta-system-syslog?revision=2014-10-28)vyatta-system-syslog","(urn:vyatta.com:mgmt:vyatta-interfaces?revision=2015-06-23)vyatta-interfaces","(urn:vyatta.com:mgmt:vyatta-multicast?revision=2015-06-23)vyatta-multicast","(urn:vyatta.com:mgmt:vyatta-service-twamp?revision=2015-02-06)vyatta-service-twamp","(urn:vyatta.com:mgmt:vyatta-dhcp-client?revision=2015-06-23)vyatta-dhcp-client","(urn:vyatta.com:mgmt:vyatta-security?revision=2015-05-02)vyatta-security","(urn:vyatta.com:mgmt:vyatta-ssh-known-hosts?revision=2014-08-27)vyatta-security-ssh-known-hosts","(urn:vyatta.com:mgmt:vyatta-types?revision=2015-05-12)vyatta-types","(urn:vyatta.com:mgmt:vyatta-dhcpv6-client?revision=2015-05-26)vyatta-dhcpv6-client","(urn:vyatta.com:mgmt:vyatta-service-ssh?revision=2015-01-12)vyatta-service-ssh","(urn:vyatta.com:mgmt:vyatta-service-telnet?revision=2014-08-27)vyatta-service-telnet","(urn:vyatta.com:mgmt:vyatta-protocols-mld?revision=2015-06-23)vyatta-protocols-mld","(urn:vyatta.com:mgmt:vyatta-interfaces-loopback?revision=2015-02-10)vyatta-interfaces-loopback","(urn:vyatta.com:mgmt:vyatta-system-alg?revision=2015-02-28)vyatta-system-alg","(urn:vyatta.com:mgmt:vyatta-interfaces-dataplane?revision=2015-05-05)vyatta-interfaces-dataplane","(urn:ietf:params:xml:ns:netconf:base:1.0?revision=2011-03-08)ietf-netconf","(urn:vyatta.com:mgmt:vyatta-system-misc?revision=2014-08-27)vyatta-system-misc","(urn:vyatta.com:mgmt:vyatta-interfaces-openvpn?revision=2015-05-12)vyatta-interfaces-openvpn","(urn:vyatta.com:mgmt:vyatta-service-dns?revision=2014-10-28)vyatta-service-dns","(urn:vyatta.com:mgmt:vyatta-vrrp?revision=2015-02-11)vyatta-vrrp","(urn:vyatta.com:mgmt:vyatta-openvpn-access-server?revision=2014-08-27)vyatta-openvpn-access-server","(urn:vyatta.com:mgmt:vyatta-system-time?revision=2015-02-12)vyatta-system-time","(urn:vyatta.com:mgmt:vyatta-system-login?revision=2015-03-23)vyatta-system-login","(urn:vyatta.com:mgmt:vyatta-service-dhcpv6-server?revision=2015-03-12)vyatta-service-dhcpv6-server","(urn:vyatta.com:mgmt:vyatta-service-dhcp-relay?revision=2014-12-01)vyatta-service-dhcp-relay","(urn:vyatta.com:mgmt:vyatta-service-flow-monitoring?revision=2015-02-09)vyatta-service-flow-monitoring","(urn:vyatta.com:mgmt:vyatta-protocols-bfd?revision=2015-05-26)vyatta-protocols-bfd","(urn:vyatta.com:mgmt:configd?revision=2014-12-17)configd","(urn:vyatta.com:mgmt:vyatta-policy-qos?revision=2015-06-23)vyatta-policy-qos","(urn:vyatta.com:mgmt:vyatta-system-power-profile?revision=2015-03-09)vyatta-system-power-profile","(urn:vyatta.com:mgmt:vyatta-protocols-rip?revision=2015-06-08)vyatta-protocols-rip","(urn:ietf:params:xml:ns:yang:ietf-inet-types?revision=2010-09-24)ietf-inet-types","(urn:vyatta.com:mgmt:vyatta-security-vpn-l2tp?revision=2014-08-27)vyatta-security-vpn-l2tp","(urn:vyatta.com:mgmt:vyatta-protocols-msdp?revision=2015-06-23)vyatta-protocols-msdp","(urn:vyatta.com:mgmt:vyatta-policy?revision=2015-05-02)vyatta-policy","(urn:ietf:params:xml:ns:yang:ietf-netconf-monitoring?revision=2010-10-04)ietf-netconf-monitoring","(urn:vyatta.com:mgmt:vyatta-system-sync?revision=2014-08-27)vyatta-system-sync","(urn:vyatta.com:mgmt:vyatta-service-dhcpv6-relay?revision=2014-08-27)vyatta-service-dhcpv6-relay","(urn:vyatta.com:mgmt:vyatta-protocols-bgp?revision=2015-05-26)vyatta-protocols-bgp","(urn:vyatta.com:mgmt:vyatta-system-acm-opd?revision=2014-08-26)vyatta-system-acm-opd","(urn:vyatta.com:mgmt:vyatta-system-session?revision=2014-10-28)vyatta-system-session","(urn:vyatta.com:mgmt:vyatta-system-acm-configd?revision=2014-08-26)vyatta-system-acm-configd","(urn:vyatta.com:mgmt:vyatta-service?revision=2015-05-02)vyatta-services","(urn:vyatta.com:mgmt:vyatta-protocols?revision=2015-05-02)vyatta-protocols","(urn:vyatta.com:mgmt:vyatta-protocols-pim?revision=2015-06-23)vyatta-protocols-pim","(urn:vyatta.com:mgmt:vyatta-interfaces-tunnel?revision=2015-04-16)vyatta-interfaces-tunnel","(urn:vyatta.com:mgmt:vyatta-interfaces-vti?revision=2015-02-10)vyatta-interfaces-vti","(urn:vyatta.com:mgmt:vyatta-fw-types?revision=2015-05-05)vyatta-fw-types","(urn:vyatta.com:mgmt:vyatta-service-port-monitor?revision=2015-04-21)vyatta-service-portmonitor","(urn:vyatta.com:mgmt:vyatta-system-fips?revision=2014-10-28)vyatta-system-fips","(urn:vyatta.com:mgmt:vyatta-interfaces-unnumbered?revision=2015-02-12)vyatta-interfaces-dataplane-unnumbered","(urn:vyatta.com:mgmt:vyatta-ipv6-rtradv?revision=2015-06-23)vyatta-ipv6-rtradv","(urn:vyatta.com:mgmt:vyatta-interfaces-l2tpeth?revision=2015-04-16)vyatta-interfaces-l2tpeth","(urn:vyatta.com:mgmt:vyatta-ssl-vpn-bundler?revision=2014-10-28)vyatta-ssl-vpn-bundler","(urn:vyatta.com:mgmt:vyatta-service-dhcp-server?revision=2015-03-17)vyatta-service-dhcp-server","(urn:vyatta.com:mgmt:vyatta-protocols-ecmp?revision=2014-10-28)vyatta-protocols-ecmp","(urn:vyatta.com:mgmt:vyatta-system?revision=2015-05-02)vyatta-system","(urn:vyatta.com:mgmt:vyatta-resources-service-users?revision=2014-08-27)vyatta-resources-service-users","(urn:vyatta.com:mgmt:vyatta-system-package?revision=2014-08-27)vyatta-system-package","(urn:vyatta.com:mgmt:vyatta-resources?revision=2015-05-02)vyatta-resources","(urn:vyatta.com:mgmt:vyatta-system-tacplus?revision=2015-06-01)vyatta-system-tacplus","(urn:vyatta.com:mgmt:vyatta-policy-pbr?revision=2015-01-09)vyatta-policy-pbr","(urn:vyatta.com:mgmt:vyatta-protocols-igmp?revision=2015-06-23)vyatta-protocols-igmp","(urn:vyatta.com:mgmt:vyatta-service-connsync?revision=2015-05-03)vyatta-service-connsync","(urn:vyatta.com:mgmt:vyatta-service-lldp?revision=2014-08-27)vyatta-service-lldp","(urn:vyatta.com:mgmt:vyatta-system-mgmt?revision=2014-08-27)vyatta-system-mgmt","(urn:ietf:params:xml:ns:yang:ietf-yang-types?revision=2010-09-24)ietf-yang-types","(urn:vyatta.com:mgmt:vyatta-system-acm?revision=2015-05-02)vyatta-system-acm","(urn:vyatta.com:mgmt:vyatta-service-https?revision=2014-08-27)vyatta-service-https","(urn:vyatta.com:mgmt:vyatta-protocols-nsm?revision=2015-05-26)vyatta-protocols-nsm"],"netconf-node-inventory:connected":true},{"id":"controller-config","netconf-node-inventory:initial-capability":["(urn:opendaylight:params:xml:ns:yang:controller:netconf:mdsal:mapper?revision=2015-01-14)netconf-mdsal-mapper","(urn:opendaylight:params:xml:ns:yang:controller:md:sal:dom:impl?revision=2013-10-28)opendaylight-sal-dom-broker-impl","(urn:opendaylight:params:xml:ns:yang:controller:threadpool:impl:fixed?revision=2013-12-01)threadpool-impl-fixed","(urn:cisco:params:xml:ns:yang:messagebus:eventsource?revision=2014-12-02)event-source","(urn:ietf:params:xml:ns:yang:ietf-netconf-monitoring-extension?revision=2013-12-10)ietf-netconf-monitoring-extension","(urn:opendaylight:params:xml:ns:yang:controller:config:netconf:auth?revision=2015-07-15)netconf-auth","(urn:ietf:params:xml:ns:netconf:base:1.0?revision=2011-06-01)ietf-netconf","(urn:TBD:params:xml:ns:yang:network:ted?revision=2013-10-21)ted","(urn:TBD:params:xml:ns:yang:ospf-topology?revision=2013-10-21)ospf-topology","(urn:opendaylight:params:xml:ns:yang:controller:md:sal:core:general-entity?revision=2015-08-20)general-entity","(urn:opendaylight:params:xml:ns:yang:controller:netty:timer?revision=2013-11-19)netty-timer","(config:aaa:authn:mdsal:store?revision=2014-10-31)aaa-authn-mdsal-store-cfg","(urn:TBD:params:xml:ns:yang:network:isis-topology?revision=2013-10-21)isis-topology","(urn:opendaylight:params:xml:ns:yang:controller:md:sal:rest:connector?revision=2014-07-24)opendaylight-rest-connector","(urn:opendaylight:params:xml:ns:yang:controller:md:sal:binding?revision=2013-10-28)opendaylight-md-sal-binding","(urn:opendaylight:netconf-node-inventory?revision=2014-01-08)netconf-node-inventory","(urn:ietf:params:xml:ns:netmod:notification?revision=2008-07-14)nc-notifications","(urn:TBD:params:xml:ns:yang:network:ted?revision=2013-07-12)ted","(config:aaa:authn:netconf:plugin?revision=2015-07-15)aaa-authn-netconf-plugin","(urn:opendaylight:params:xml:ns:yang:controller:config:aaa-authz:srv?revision=2014-07-01)aaa-authz-service-impl","(urn:opendaylight:inventory?revision=2013-08-19)opendaylight-inventory","(urn:aaa:yang:authz:ds?revision=2014-07-22)authorization-schema","(urn:opendaylight:params:xml:ns:yang:controller:md:sal:core:spi:config-dom-store?revision=2014-06-17)opendaylight-config-dom-datastore","(urn:ietf:params:xml:ns:yang:iana-if-type?revision=2014-05-08)iana-if-type","(urn:ietf:params:xml:ns:yang:ietf-yang-types?revision=2013-07-15)ietf-yang-types","(urn:opendaylight:yang:extension:yang-ext?revision=2013-07-09)yang-ext","(urn:opendaylight:params:xml:ns:yang:controller:config:netconf:client:dispatcher?revision=2014-04-08)odl-netconfig-client-cfg","(urn:ietf:params:xml:ns:yang:ospf-topology?revision=2013-07-12)ospf-topology","(urn:opendaylight:params:xml:ns:yang:controller:md:sal:binding:impl?revision=2013-10-28)opendaylight-sal-binding-broker-impl","(urn:opendaylight:params:xml:ns:yang:controller:config:concurrent-data-broker?revision=2014-11-24)odl-concurrent-data-broker-cfg","(urn:TBD:params:xml:ns:yang:network-topology?revision=2013-10-21)network-topology","(urn:opendaylight:l2:types?revision=2013-08-27)opendaylight-l2-types","(urn:opendaylight:params:xml:ns:yang:controller:shutdown:impl?revision=2013-12-18)shutdown-impl","(urn:opendaylight:params:xml:ns:yang:controller:messagebus:spi:eventsourceregistry?revision=2015-04-02)messagebus-event-source-registry","(urn:TBD:params:xml:ns:yang:network:isis-topology?revision=2013-07-12)isis-topology","(urn:opendaylight:params:xml:ns:yang:controller:threadpool?revision=2013-04-09)threadpool","(urn:opendaylight:params:xml:ns:yang:controller:netconf:north:mapper?revision=2015-01-14)netconf-northbound-mapper","(urn:opendaylight:params:xml:ns:yang:controller:messagebus:app:impl?revision=2015-02-03)messagebus-app-impl","(urn:opendaylight:params:xml:ns:yang:controller:netconf:northbound:tcp?revision=2015-04-23)netconf-northbound-tcp","(urn:opendaylight:params:xml:ns:yang:controller:config:distributed-entity-ownership-service?revision=2015-08-10)distributed-entity-ownership-service","(urn:opendaylight:params:xml:ns:yang:controller:threadpool:impl:flexible?revision=2013-12-01)threadpool-impl-flexible","(urn:TBD:params:xml:ns:yang:nt:l3-unicast-igp-topology?revision=2013-10-21)l3-unicast-igp-topology","(urn:opendaylight:netconf-node-topology?revision=2015-01-14)netconf-node-topology","(urn:opendaylight:params:xml:ns:yang:controller:config?revision=2013-04-05)config","(urn:ietf:params:xml:ns:yang:ietf-netconf-notifications?revision=2012-02-06)ietf-netconf-notifications","(urn:opendaylight:params:xml:ns:yang:controller:protocol:framework?revision=2014-03-13)protocol-framework","(urn:opendaylight:params:xml:ns:yang:controller:netconf:mdsal:monitoring?revision=2015-02-18)netconf-mdsal-monitoring","(urn:sal:restconf:event:subscription?revision=2014-07-08)sal-remote-augment","(urn:opendaylight:params:xml:ns:yang:controller:netty?revision=2013-11-19)netty","(urn:opendaylight:params:xml:ns:yang:controller:config:remote-rpc-connector?revision=2014-07-07)remote-rpc-connector","(urn:opendaylight:params:xml:ns:yang:controller:config:toaster-provider:impl?revision=2014-01-31)toaster-provider-impl","(urn:ietf:params:xml:ns:yang:ietf-inet-types?revision=2010-09-24)ietf-inet-types","(urn:ietf:params:xml:ns:yang:ietf-netconf-monitoring?revision=2010-10-04)ietf-netconf-monitoring","(urn:opendaylight:params:xml:ns:yang:controller:md:sal:core:spi:entity-ownership-service?revision=2015-08-10)opendaylight-entity-ownership-service","(urn:opendaylight:params:xml:ns:yang:controller:md:sal:dom:pingpong?revision=2014-11-07)opendaylight-pingpong-broker","(urn:opendaylight:params:xml:ns:yang:controller:netconf:northbound:ssh?revision=2015-01-14)netconf-northbound-ssh","(urn:ietf:params:xml:ns:yang:rpc-context?revision=2013-06-17)rpc-context","(urn:opendaylight:params:xml:ns:yang:controller:md:sal:clustering:entity-owners?revision=2015-08-04)entity-owners","(urn:ietf:params:xml:ns:yang:iana-afn-safi?revision=2013-07-04)iana-afn-safi","(urn:opendaylight:params:xml:ns:yang:controller:md:sal:common?revision=2013-10-28)opendaylight-md-sal-common","(urn:opendaylight:params:xml:ns:yang:controller:config:netconf:northbound?revision=2015-01-14)netconf-northbound","(urn:opendaylight:params:xml:ns:yang:controller:messagebus:netconf?revision=2015-07-28)messagebus-netconf","(http://netconfcentral.org/ns/toaster?revision=2009-11-20)toaster","(urn:ietf:params:xml:ns:yang:ietf-restconf?revision=2013-10-19)ietf-restconf","(urn:opendaylight:params:xml:ns:yang:controller:config:netconf?revision=2014-04-08)odl-netconf-cfg","(urn:opendaylight:params:xml:ns:yang:controller:md:sal:connector:netconf?revision=2013-10-28)odl-sal-netconf-connector-cfg","(urn:opendaylight:params:xml:ns:yang:controller:shutdown?revision=2013-12-18)shutdown","(urn:opendaylight:params:xml:ns:yang:controller:config:netconf:northbound:impl?revision=2015-01-12)netconf-northbound-impl","(urn:opendaylight:params:xml:ns:yang:controller:netty:eventexecutor?revision=2013-11-12)netty-event-executor","(urn:opendaylight:params:xml:ns:yang:controller:md:sal:remote?revision=2014-01-14)sal-remote","(urn:opendaylight:params:xml:ns:yang:controller:config:kitchen-service:impl?revision=2014-01-31)kitchen-service-impl","(urn:opendaylight:params:xml:ns:yang:controller:threadpool:impl:scheduled?revision=2013-12-01)threadpool-impl-scheduled","(urn:opendaylight:params:xml:ns:yang:controller:netty:threadgroup?revision=2013-11-07)threadgroup","(urn:ietf:params:xml:ns:yang:ietf-interfaces?revision=2014-05-08)ietf-interfaces","(urn:opendaylight:params:xml:ns:yang:controller:md:sal:core:spi:operational-dom-store?revision=2014-06-17)opendaylight-operational-dom-datastore","(http://netconfcentral.org/ns/XSQL?revision=2014-06-26)XSQL","(urn:opendaylight:params:xml:ns:yang:controller:md:sal:dom?revision=2013-10-28)opendaylight-md-sal-dom","(urn:cisco:params:xml:ns:yang:messagebus:eventaggregator?revision=2014-12-02)event-aggregator","(urn:TBD:params:xml:ns:yang:network-topology?revision=2013-07-12)network-topology","(urn:opendaylight:params:xml:ns:yang:controller:inmemory-datastore-provider?revision=2014-06-17)opendaylight-inmemory-datastore-provider","(urn:opendaylight:params:xml:ns:yang:aaa:credential-store?revision=2015-02-26)credential-store","(urn:ietf:params:xml:ns:yang:ietf-yang-types?revision=2010-09-24)ietf-yang-types","(urn:TBD:params:xml:ns:yang:nt:l3-unicast-igp-topology?revision=2013-07-12)l3-unicast-igp-topology","(urn:opendaylight:params:xml:ns:yang:controller:threadpool:impl?revision=2013-04-05)threadpool-impl","(urn:aaa:yang:authn:claims?revision=2014-10-29)aaa-authn-model","(urn:ietf:params:xml:ns:netconf:notification:1.0?revision=2008-07-14)notifications","(urn:opendaylight:params:xml:ns:yang:controller:config:distributed-datastore-provider?revision=2014-06-12)distributed-datastore-provider"],"netconf-node-inventory:connected":true}]'

        # SAMPLE RULES
        '[{"vyatta-security-firewall:name":[{"tagnode":"test","rule":[{"tagnode":1,"destination":{"address":"10.128.167.101"},"action":"drop"},{"tagnode":2,"destination":{"address":"10.128.167.253"},"source":{"address":"4.4.4.2"},"action":"drop"},{"tagnode":3,"action":"accept"}]}]}]'
      end

      private

      def client
        @client ||= HTTParty
      end
    end
  end
end
